<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>Backend.utils API documentation</title>
<meta name="description" content="This file holds the entire database related configuration and fucntions" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>Backend.utils</code></h1>
</header>
<section id="section-intro">
<p>This file holds the entire database related configuration and fucntions</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#39;&#39;&#39;
This file holds the entire database related configuration and fucntions
&#39;&#39;&#39;
import ast
import re
import mysql.connector
from ast import literal_eval as make_tuple
from src.Backend.dbconfig import constants

try:
    connection = mysql.connector.connect(
        host=constants[&#34;host&#34;], user=constants[&#34;user&#34;], password=constants[&#34;password&#34;], database=constants[&#34;database&#34;])
except:
    pass
# cursor = connection.cursor(dictionary=True)
# cursor.execute(&#39;set GLOBAL max_allowed_packet=67108864&#39;)
# connection.query(&#39;SET GLOBAL connect_timeout=6000&#39;)
# cursor.execute(&#39;set max_allowed_packet=67108864&#39;)


def get_items(page, user_id):
    &#34;&#34;&#34;
    Get all the items given the page number and user id from the database.

    Parameters
    ----------
    user_id : int
        ID associated with logged in user.
    page : int
        Page number associated with the dashboard. Each pagenumber consists of 10 items.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is the list of all the items that the user is interested in.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        finalData = []
        sql_get_data_query = &#34;&#34;&#34;select email, Interests from users where ID = %s&#34;&#34;&#34;
        record = (int(user_id),)
    
        cursor.execute(sql_get_data_query, record)
        data = cursor.fetchall()
        data2 = data[0][&#34;Interests&#34;]
        data2 = data2.replace(&#34;[&#34;,&#34;(&#34;)
        data2 = data2.replace(&#34;]&#34;,&#34;)&#34;)
        sql_select_query = &#34;&#34;&#34;select * from items where category in {} order by item_id  limit 10 offset {} &#34;&#34;&#34;.format(data2, int(page)*10-10)
        print(sql_select_query)
        cursor.execute(sql_select_query)
        
        new_record = cursor.fetchall()
        for record in new_record:
            finalData.append({&#34;itemId&#34;: record[&#34;item_id&#34;], &#34;itemName&#34;: record[&#34;item_name&#34;], &#34;itemQuantity&#34;: record[&#34;quantity&#34;], &#34;itemDescription&#34;: record[&#34;description&#34;],
                              &#34;itemZipCode&#34;: record[&#34;zipcode&#34;], &#34;itemCity&#34;: record[&#34;city&#34;], &#34;itemDonorId&#34;: record[&#34;donor_id&#34;], &#34;itemCategory&#34;: record[&#34;category&#34;], &#34;donorEmail&#34;: data[0][&#34;email&#34;]})
        print(finalData)
        cursor.close()
        return True, finalData

    except mysql.connector.Error as error:
        print(&#34;Failed to get record from MySQL table: {}&#34;.format(error))
        msg = &#34;Failed to get record from MySQL table: {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in get_items: {}&#34;.format(e))
        msg = &#34;Failed to get record from MySQL table: {}&#34;.format(e)
        return False, msg

        # print(&#34;Database error: {}&#34;.format(e))

    # finally:
    #     if connection.is_connected():
    #         cursor.close()
    #         connection.close()
    #         print(&#34;MySQL connection is closed&#34;)


def insert_item(item_name, quantity, description, zipcode, city, donor_id, category):
    &#34;&#34;&#34;
    Inserts an item into the database.

    Parameters
    ----------
    item_name : string
        Name of the item.
    quantity : int
        Quantity of the item.
    description : string
        Information about the item.
    zipcode : string
        Location of the item in zipcode.
    city : string
        Location of the item in terms of city.
    donor_id : int
        ID of the user who listed the item.
    category : string
        Which category the item belongs to. eg. Food, electronics.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a message about the same.
    &#34;&#34;&#34;

    try:
        print(item_name)
        cursor = connection.cursor(dictionary=True)
        mysql_insert_query = &#34;&#34;&#34;INSERT INTO items (item_name, quantity, description, zipcode, city, donor_id, category) 
                                VALUES (%s, %s, %s, %s, %s, %s, %s) &#34;&#34;&#34;

        record = (item_name, quantity, description,
                  zipcode, city, donor_id, category)
        cursor.execute(mysql_insert_query, record)
        connection.commit()
        print(&#34;Record inserted successfully into item table&#34;)
        msg = &#34;Record inserted successfully into item table&#34;
        cursor.close()
        return True, msg

    except mysql.connector.Error as error:
        print(&#34;Failed to insert into items table {}&#34;.format(error))
        msg = &#34;Failed to insert into items table {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in insert_item: {}&#34;.format(e))
        msg = &#34;Failed to insert into items table {}&#34;.format(e)
        return False, msg
        # return False, &#34;some error occurred in get_items: {}&#34;.format(e)

    # finally:
    #     if connection.is_connected():
    #         cursor.close()
    #         connection.close()
    #         print(&#34;MySQL connection is closed&#34;)


def update_item(data):
    &#34;&#34;&#34;
    Updates an item in the database.

    Parameters
    ----------
    data : json
        Updated item information.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a message about the same.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        mysql_update_query = &#34;&#34;&#34;UPDATE items set item_name = %s, quantity = %s, description = %s, zipcode = %s, city = %s, donor_id = %s, category = %s WHERE item_id = %s &#34;&#34;&#34;

        input_data = (data[&#39;item_name&#39;], data[&#39;quantity&#39;], data[&#39;description&#39;],
                      data[&#39;zipcode&#39;], data[&#39;city&#39;], data[&#39;donor_id&#39;], data[&#39;category&#39;], data[&#39;item_id&#39;])
        cursor.execute(mysql_update_query, input_data)
        connection.commit()
        print(&#34;Record updated successfully into item table&#34;)
        msg = &#34;Record updated successfully into item table&#34;
        cursor.close()
        return True, msg

    except mysql.connector.Error as error:
        print(&#34;Failed to update into items table {}&#34;.format(error))
        msg = &#34;Failed to update into items table {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in update_item: {}&#34;.format(e))
        msg = &#34;Failed to update into items table {}&#34;.format(e)
        return False, msg
        # return False, &#34;some error occurred in get_items: {}&#34;.format(e)


def getDonorHistory(ID):
    &#34;&#34;&#34;
    Gets Donor history of an user given their ID. 

    Parameters
    ----------
    ID : int
        ID of an user.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a list of all the items donated by the user.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        finalData = []
        cursor.execute(
            &#39;SELECT * FROM items where donor_id = %s&#39;, (int(ID),))
        data = cursor.fetchall()
        print(data)
        for record in data:
            finalData.append({&#34;itemId&#34;: record[&#34;item_id&#34;], &#34;itemName&#34;: record[&#34;item_name&#34;], &#34;itemQuantity&#34;: record[&#34;quantity&#34;], &#34;itemDescription&#34;: record[&#34;description&#34;],
                              &#34;itemZipCode&#34;: record[&#34;zipcode&#34;], &#34;itemCity&#34;: record[&#34;city&#34;], &#34;itemDonorId&#34;: record[&#34;donor_id&#34;], &#34;itemCategory&#34;: record[&#34;category&#34;]})
        # print(record[0][&#34;Interests&#34;])
        cursor.close()
        return True, finalData
    except mysql.connector.Error as error:
        print(&#34;Failed to get history {}&#34;.format(error))
        msg = &#34;Failed to get history {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in getDonorHistory: {}&#34;.format(e))
        msg = &#34;Failed to get history {}&#34;.format(e)
        return False, msg
        # return False, &#34;some error occurred in get_items: {}&#34;.format(e)


def getRecieverHistory(ID):
    &#34;&#34;&#34;
    Gets receiving history of an user given their ID. 

    Parameters
    ----------
    ID : int
        ID of an user.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a list of all the items received by the user.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        finalData = []
        cursor.execute(
            &#39;SELECT items.item_id, users.ID, items.item_name, users.Name, items.quantity, items.description, items.zipcode, items.city, items.category FROM Donation Inner join items on donation.item_id=items.item_id INNER JOIN users on items.donor_id=users.ID where recipient_id= %s&#39;, (int(ID),))
        data = cursor.fetchall()
        for record in data:
            finalData.append({&#34;itemId&#34;: record[&#34;item_id&#34;], &#34;itemName&#34;: record[&#34;item_name&#34;], &#34;itemQuantity&#34;: record[&#34;quantity&#34;], &#34;itemDescription&#34;: record[&#34;description&#34;],
                              &#34;itemZipCode&#34;: record[&#34;zipcode&#34;], &#34;itemCity&#34;: record[&#34;city&#34;], &#34;itemDonorId&#34;:record[&#34;ID&#34;], &#34;itemDonorName&#34;: record[&#34;Name&#34;], &#34;itemCategory&#34;: record[&#34;category&#34;]})
        # print(record[0][&#34;Interests&#34;])
        cursor.close()
        return True, finalData
    except mysql.connector.Error as error:
        print(&#34;Failed to get history {}&#34;.format(error))
        msg = &#34;Failed to get history {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in getRecieverHistory: {}&#34;.format(e))
        msg = &#34;Failed to get history {}&#34;.format(e)
        return False, msg
        # return False, &#34;some error occurred in get_items: {}&#34;.format(e)


def addDonation(item_id, recipient_id):
    &#34;&#34;&#34;
    Adds a transaction when the donation has taken place between two users.

    Parameters
    ----------
    item_id : int
        ID of the item being donated.
    recipient_id : int
        ID of the person who is receiving the donated id.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a message about the same.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        sql_insert_query = &#34;INSERT INTO donation (item_id, recipient_id) VALUES (%s, %s)&#34;
        cursor.execute(sql_insert_query, (item_id, recipient_id))
        connection.commit()
        msg = msg = &#34;Record inserted successfully into donation table&#34;
        cursor.close()
        return True, msg
    except mysql.connector.Error as error:
        print(&#34;Failed to insert into donation table {}&#34;.format(error))
        msg = &#34;Failed to insert into donation table {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in addDonation: {}&#34;.format(e))
        msg = &#34;Failed to insert into donation table {}&#34;.format(e)
        return False, msg
        # return False, &#34;some error occurred in get_items: {}&#34;.format(e)


def getUserProfileByID(ID):
    &#34;&#34;&#34;
    Get the user information given his ID.

    Parameters
    ----------
    ID : int
        ID of the user.

    Returns
    ----------
    list
        Returns a list containing the information of an user given his id.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        cursor.execute(
            &#39;SELECT name, email, city, zipcode, password, interests FROM users where ID = %s&#39;, (int(ID),))
        user = cursor.fetchone()
        user[&#34;city&#34;] = ast.literal_eval(user[&#34;city&#34;])
        user[&#34;zipcode&#34;] = ast.literal_eval(user[&#34;zipcode&#34;])
        user[&#34;interests&#34;] = ast.literal_eval(user[&#34;interests&#34;])

        print(type(user))
        cursor.close()
        return user
    except mysql.connector.Error as error:
        print(error)
        return []

    except Exception as e:
        print(&#34;some error occurred in getUserProfileByID: {}&#34;.format(e))
        return []
        # exit(&#34;some error occurred in get_items: {}&#34;.format(e))


def updateProfile(data):
    &#34;&#34;&#34;
    Updates an user in the database.

    Parameters
    ----------
    data : json
        Updated user information.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a message about the same.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        mysql_update_query = &#34;&#34;&#34;UPDATE users set name = %s, email=%s, city=%s, zipcode=%s, interests=%s WHERE ID = %s &#34;&#34;&#34;

        input_data = (data[&#39;name&#39;], data[&#39;email&#39;],
                      str(data[&#39;city&#39;]), str(data[&#39;zipCodes&#39;]), str(data[&#39;interests&#39;]), int(data[&#39;id&#39;]))
        cursor.execute(mysql_update_query, input_data)
        connection.commit()

        print(&#34;Record updated successfully into item table&#34;)
        msg = &#34;Record updated successfully into item table&#34;
        cursor.close()
        return True, msg

    except mysql.connector.Error as error:
        print(&#34;Failed to update table {}&#34;.format(error))
        msg = &#34;Failed to update table {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in updateProfile: {}&#34;.format(e))
        msg = &#34;Failed to update table {}&#34;.format(e)
        return False, msg
        # exit(&#34;some error occurred in get_items: {}&#34;.format(e))


def getUserProfileByEmail(email):
    &#34;&#34;&#34;
    Gets the user information given his email.

    Parameters
    ----------
    email : string
        Email of the user.

    Returns
    ----------
    list
        Returns a list containing the information of an user given his email.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        cursor.execute(
            &#39;SELECT ID, name, email, city, zipcode, interests FROM users WHERE email = %s&#39;, (email,))
        user = cursor.fetchone()
        print(user)
        user[&#34;city&#34;] = ast.literal_eval(user[&#34;city&#34;])
        user[&#34;zipcode&#34;] = ast.literal_eval(user[&#34;zipcode&#34;])
        user[&#34;interests&#34;] = ast.literal_eval(user[&#34;interests&#34;])
        cursor.close()
        return user
    except mysql.connector.Error as error:
        print(error)
        return []

    except Exception as e:
        print(&#34;some error occurred in getUserProfileByEmail: {}&#34;.format(e))
        return []
        # exit(&#34;some error occurred in get_items: {}&#34;.format(e))


def loginCheck(email, password):
    &#34;&#34;&#34;
    Checks if the password and email are matching in the database.

    Parameters
    ----------
    email : string
        Email of the user.
    password : string
        Password of the user.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) is a check to see if there is a user present with matching password and email. The second element is a status code of whether there is a database error or not.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        cursor.execute(
            &#39;SELECT * FROM users WHERE email = %s AND password = %s&#39;, (email, password))
        user = cursor.fetchone()
        cursor.close()
        if user:
            return (True, 1)
        else:
            return (False, 1)
    except mysql.connector.Error as error:
        print(error)
        return (False, 0)

    except Exception as e:
        print(&#34;some error occurred in loginCheck: {}&#34;.format(e))
        return (False, 0)
        # exit(&#34;some error occurred in get_items: {}&#34;.format(e))


def addUser(name, password, email, city, zipcode, interests):
    &#34;&#34;&#34;
    Checks if the password and email are matching in the database.

    Parameters
    ----------
    name : string
        Name of the user.
    password : string
        Password of the user.
    email : string
        Email of the user.
    city : list
        List of cities which are of interest to the user.
    zipcode : list
        List of zipcodes which are of interest to the user.
    interests : list
        List of interests of the user.

    Returns
    ----------
    bool
        Checks if the user got added to the database or not.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        sql_insert_query = &#34;INSERT INTO users (name, password, email, city, zipcode, interests) VALUES (%s, %s, %s, %s, %s, %s)&#34;
        cursor.execute(sql_insert_query, (name, password,
                                          email, city, zipcode, interests))
        connection.commit()
        cursor.close()
        return True
    except mysql.connector.Error as error:
        print(error)
        return False

    except Exception as e:
        print(&#34;some error occurred in addUser: {}&#34;.format(e))
        return False
        # exit(&#34;some error occurred in get_items: {}&#34;.format(e))


def checkDuplicateEmail(email):
    &#34;&#34;&#34;
    Checks if an email is present twice in the database.

    Parameters
    ----------
    email : string
        Email of the user.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) is a check to see if there are two users with the same email. The second element is a status code of whether there is a database error or not.  
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        sql_select_query = &#34;SELECT * FROM users WHERE email = %s&#34;
        cursor.execute(sql_select_query, (email,))
        # fetch result
        record = cursor.fetchall()
        match = re.match(r&#39;[^@]+@[^@]+\.[^@]+&#39;, email)
        cursor.close()
        if record or not match:
            return (True, 1)
        else:
            return (False, 1)
    except mysql.connector.Error as error:
        print(error)
        return (False, 0)

    except Exception as e:
        print(&#34;some error occurred in checkDuplicateEmail: {}&#34;.format(e))
        return (False, 0)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="Backend.utils.addDonation"><code class="name flex">
<span>def <span class="ident">addDonation</span></span>(<span>item_id, recipient_id)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds a transaction when the donation has taken place between two users.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>item_id</code></strong> :&ensp;<code>int</code></dt>
<dd>ID of the item being donated.</dd>
<dt><strong><code>recipient_id</code></strong> :&ensp;<code>int</code></dt>
<dd>ID of the person who is receiving the donated id.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a message about the same.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def addDonation(item_id, recipient_id):
    &#34;&#34;&#34;
    Adds a transaction when the donation has taken place between two users.

    Parameters
    ----------
    item_id : int
        ID of the item being donated.
    recipient_id : int
        ID of the person who is receiving the donated id.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a message about the same.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        sql_insert_query = &#34;INSERT INTO donation (item_id, recipient_id) VALUES (%s, %s)&#34;
        cursor.execute(sql_insert_query, (item_id, recipient_id))
        connection.commit()
        msg = msg = &#34;Record inserted successfully into donation table&#34;
        cursor.close()
        return True, msg
    except mysql.connector.Error as error:
        print(&#34;Failed to insert into donation table {}&#34;.format(error))
        msg = &#34;Failed to insert into donation table {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in addDonation: {}&#34;.format(e))
        msg = &#34;Failed to insert into donation table {}&#34;.format(e)
        return False, msg
        # return False, &#34;some error occurred in get_items: {}&#34;.format(e)</code></pre>
</details>
</dd>
<dt id="Backend.utils.addUser"><code class="name flex">
<span>def <span class="ident">addUser</span></span>(<span>name, password, email, city, zipcode, interests)</span>
</code></dt>
<dd>
<div class="desc"><p>Checks if the password and email are matching in the database.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>string</code></dt>
<dd>Name of the user.</dd>
<dt><strong><code>password</code></strong> :&ensp;<code>string</code></dt>
<dd>Password of the user.</dd>
<dt><strong><code>email</code></strong> :&ensp;<code>string</code></dt>
<dd>Email of the user.</dd>
<dt><strong><code>city</code></strong> :&ensp;<code>list</code></dt>
<dd>List of cities which are of interest to the user.</dd>
<dt><strong><code>zipcode</code></strong> :&ensp;<code>list</code></dt>
<dd>List of zipcodes which are of interest to the user.</dd>
<dt><strong><code>interests</code></strong> :&ensp;<code>list</code></dt>
<dd>List of interests of the user.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>Checks if the user got added to the database or not.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def addUser(name, password, email, city, zipcode, interests):
    &#34;&#34;&#34;
    Checks if the password and email are matching in the database.

    Parameters
    ----------
    name : string
        Name of the user.
    password : string
        Password of the user.
    email : string
        Email of the user.
    city : list
        List of cities which are of interest to the user.
    zipcode : list
        List of zipcodes which are of interest to the user.
    interests : list
        List of interests of the user.

    Returns
    ----------
    bool
        Checks if the user got added to the database or not.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        sql_insert_query = &#34;INSERT INTO users (name, password, email, city, zipcode, interests) VALUES (%s, %s, %s, %s, %s, %s)&#34;
        cursor.execute(sql_insert_query, (name, password,
                                          email, city, zipcode, interests))
        connection.commit()
        cursor.close()
        return True
    except mysql.connector.Error as error:
        print(error)
        return False

    except Exception as e:
        print(&#34;some error occurred in addUser: {}&#34;.format(e))
        return False
        # exit(&#34;some error occurred in get_items: {}&#34;.format(e))</code></pre>
</details>
</dd>
<dt id="Backend.utils.checkDuplicateEmail"><code class="name flex">
<span>def <span class="ident">checkDuplicateEmail</span></span>(<span>email)</span>
</code></dt>
<dd>
<div class="desc"><p>Checks if an email is present twice in the database.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>email</code></strong> :&ensp;<code>string</code></dt>
<dd>Email of the user.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>Returns a tuple with two elements. The first element(a boolean variable) is a check to see if there are two users with the same email. The second element is a status code of whether there is a database error or not.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def checkDuplicateEmail(email):
    &#34;&#34;&#34;
    Checks if an email is present twice in the database.

    Parameters
    ----------
    email : string
        Email of the user.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) is a check to see if there are two users with the same email. The second element is a status code of whether there is a database error or not.  
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        sql_select_query = &#34;SELECT * FROM users WHERE email = %s&#34;
        cursor.execute(sql_select_query, (email,))
        # fetch result
        record = cursor.fetchall()
        match = re.match(r&#39;[^@]+@[^@]+\.[^@]+&#39;, email)
        cursor.close()
        if record or not match:
            return (True, 1)
        else:
            return (False, 1)
    except mysql.connector.Error as error:
        print(error)
        return (False, 0)

    except Exception as e:
        print(&#34;some error occurred in checkDuplicateEmail: {}&#34;.format(e))
        return (False, 0)</code></pre>
</details>
</dd>
<dt id="Backend.utils.getDonorHistory"><code class="name flex">
<span>def <span class="ident">getDonorHistory</span></span>(<span>ID)</span>
</code></dt>
<dd>
<div class="desc"><p>Gets Donor history of an user given their ID. </p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>ID</code></strong> :&ensp;<code>int</code></dt>
<dd>ID of an user.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a list of all the items donated by the user.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getDonorHistory(ID):
    &#34;&#34;&#34;
    Gets Donor history of an user given their ID. 

    Parameters
    ----------
    ID : int
        ID of an user.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a list of all the items donated by the user.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        finalData = []
        cursor.execute(
            &#39;SELECT * FROM items where donor_id = %s&#39;, (int(ID),))
        data = cursor.fetchall()
        print(data)
        for record in data:
            finalData.append({&#34;itemId&#34;: record[&#34;item_id&#34;], &#34;itemName&#34;: record[&#34;item_name&#34;], &#34;itemQuantity&#34;: record[&#34;quantity&#34;], &#34;itemDescription&#34;: record[&#34;description&#34;],
                              &#34;itemZipCode&#34;: record[&#34;zipcode&#34;], &#34;itemCity&#34;: record[&#34;city&#34;], &#34;itemDonorId&#34;: record[&#34;donor_id&#34;], &#34;itemCategory&#34;: record[&#34;category&#34;]})
        # print(record[0][&#34;Interests&#34;])
        cursor.close()
        return True, finalData
    except mysql.connector.Error as error:
        print(&#34;Failed to get history {}&#34;.format(error))
        msg = &#34;Failed to get history {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in getDonorHistory: {}&#34;.format(e))
        msg = &#34;Failed to get history {}&#34;.format(e)
        return False, msg
        # return False, &#34;some error occurred in get_items: {}&#34;.format(e)</code></pre>
</details>
</dd>
<dt id="Backend.utils.getRecieverHistory"><code class="name flex">
<span>def <span class="ident">getRecieverHistory</span></span>(<span>ID)</span>
</code></dt>
<dd>
<div class="desc"><p>Gets receiving history of an user given their ID. </p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>ID</code></strong> :&ensp;<code>int</code></dt>
<dd>ID of an user.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a list of all the items received by the user.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getRecieverHistory(ID):
    &#34;&#34;&#34;
    Gets receiving history of an user given their ID. 

    Parameters
    ----------
    ID : int
        ID of an user.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a list of all the items received by the user.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        finalData = []
        cursor.execute(
            &#39;SELECT items.item_id, users.ID, items.item_name, users.Name, items.quantity, items.description, items.zipcode, items.city, items.category FROM Donation Inner join items on donation.item_id=items.item_id INNER JOIN users on items.donor_id=users.ID where recipient_id= %s&#39;, (int(ID),))
        data = cursor.fetchall()
        for record in data:
            finalData.append({&#34;itemId&#34;: record[&#34;item_id&#34;], &#34;itemName&#34;: record[&#34;item_name&#34;], &#34;itemQuantity&#34;: record[&#34;quantity&#34;], &#34;itemDescription&#34;: record[&#34;description&#34;],
                              &#34;itemZipCode&#34;: record[&#34;zipcode&#34;], &#34;itemCity&#34;: record[&#34;city&#34;], &#34;itemDonorId&#34;:record[&#34;ID&#34;], &#34;itemDonorName&#34;: record[&#34;Name&#34;], &#34;itemCategory&#34;: record[&#34;category&#34;]})
        # print(record[0][&#34;Interests&#34;])
        cursor.close()
        return True, finalData
    except mysql.connector.Error as error:
        print(&#34;Failed to get history {}&#34;.format(error))
        msg = &#34;Failed to get history {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in getRecieverHistory: {}&#34;.format(e))
        msg = &#34;Failed to get history {}&#34;.format(e)
        return False, msg
        # return False, &#34;some error occurred in get_items: {}&#34;.format(e)</code></pre>
</details>
</dd>
<dt id="Backend.utils.getUserProfileByEmail"><code class="name flex">
<span>def <span class="ident">getUserProfileByEmail</span></span>(<span>email)</span>
</code></dt>
<dd>
<div class="desc"><p>Gets the user information given his email.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>email</code></strong> :&ensp;<code>string</code></dt>
<dd>Email of the user.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>list</code></dt>
<dd>Returns a list containing the information of an user given his email.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getUserProfileByEmail(email):
    &#34;&#34;&#34;
    Gets the user information given his email.

    Parameters
    ----------
    email : string
        Email of the user.

    Returns
    ----------
    list
        Returns a list containing the information of an user given his email.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        cursor.execute(
            &#39;SELECT ID, name, email, city, zipcode, interests FROM users WHERE email = %s&#39;, (email,))
        user = cursor.fetchone()
        print(user)
        user[&#34;city&#34;] = ast.literal_eval(user[&#34;city&#34;])
        user[&#34;zipcode&#34;] = ast.literal_eval(user[&#34;zipcode&#34;])
        user[&#34;interests&#34;] = ast.literal_eval(user[&#34;interests&#34;])
        cursor.close()
        return user
    except mysql.connector.Error as error:
        print(error)
        return []

    except Exception as e:
        print(&#34;some error occurred in getUserProfileByEmail: {}&#34;.format(e))
        return []
        # exit(&#34;some error occurred in get_items: {}&#34;.format(e))</code></pre>
</details>
</dd>
<dt id="Backend.utils.getUserProfileByID"><code class="name flex">
<span>def <span class="ident">getUserProfileByID</span></span>(<span>ID)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the user information given his ID.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>ID</code></strong> :&ensp;<code>int</code></dt>
<dd>ID of the user.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>list</code></dt>
<dd>Returns a list containing the information of an user given his id.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getUserProfileByID(ID):
    &#34;&#34;&#34;
    Get the user information given his ID.

    Parameters
    ----------
    ID : int
        ID of the user.

    Returns
    ----------
    list
        Returns a list containing the information of an user given his id.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        cursor.execute(
            &#39;SELECT name, email, city, zipcode, password, interests FROM users where ID = %s&#39;, (int(ID),))
        user = cursor.fetchone()
        user[&#34;city&#34;] = ast.literal_eval(user[&#34;city&#34;])
        user[&#34;zipcode&#34;] = ast.literal_eval(user[&#34;zipcode&#34;])
        user[&#34;interests&#34;] = ast.literal_eval(user[&#34;interests&#34;])

        print(type(user))
        cursor.close()
        return user
    except mysql.connector.Error as error:
        print(error)
        return []

    except Exception as e:
        print(&#34;some error occurred in getUserProfileByID: {}&#34;.format(e))
        return []
        # exit(&#34;some error occurred in get_items: {}&#34;.format(e))</code></pre>
</details>
</dd>
<dt id="Backend.utils.get_items"><code class="name flex">
<span>def <span class="ident">get_items</span></span>(<span>page, user_id)</span>
</code></dt>
<dd>
<div class="desc"><p>Get all the items given the page number and user id from the database.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>user_id</code></strong> :&ensp;<code>int</code></dt>
<dd>ID associated with logged in user.</dd>
<dt><strong><code>page</code></strong> :&ensp;<code>int</code></dt>
<dd>Page number associated with the dashboard. Each pagenumber consists of 10 items.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is the list of all the items that the user is interested in.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_items(page, user_id):
    &#34;&#34;&#34;
    Get all the items given the page number and user id from the database.

    Parameters
    ----------
    user_id : int
        ID associated with logged in user.
    page : int
        Page number associated with the dashboard. Each pagenumber consists of 10 items.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is the list of all the items that the user is interested in.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        finalData = []
        sql_get_data_query = &#34;&#34;&#34;select email, Interests from users where ID = %s&#34;&#34;&#34;
        record = (int(user_id),)
    
        cursor.execute(sql_get_data_query, record)
        data = cursor.fetchall()
        data2 = data[0][&#34;Interests&#34;]
        data2 = data2.replace(&#34;[&#34;,&#34;(&#34;)
        data2 = data2.replace(&#34;]&#34;,&#34;)&#34;)
        sql_select_query = &#34;&#34;&#34;select * from items where category in {} order by item_id  limit 10 offset {} &#34;&#34;&#34;.format(data2, int(page)*10-10)
        print(sql_select_query)
        cursor.execute(sql_select_query)
        
        new_record = cursor.fetchall()
        for record in new_record:
            finalData.append({&#34;itemId&#34;: record[&#34;item_id&#34;], &#34;itemName&#34;: record[&#34;item_name&#34;], &#34;itemQuantity&#34;: record[&#34;quantity&#34;], &#34;itemDescription&#34;: record[&#34;description&#34;],
                              &#34;itemZipCode&#34;: record[&#34;zipcode&#34;], &#34;itemCity&#34;: record[&#34;city&#34;], &#34;itemDonorId&#34;: record[&#34;donor_id&#34;], &#34;itemCategory&#34;: record[&#34;category&#34;], &#34;donorEmail&#34;: data[0][&#34;email&#34;]})
        print(finalData)
        cursor.close()
        return True, finalData

    except mysql.connector.Error as error:
        print(&#34;Failed to get record from MySQL table: {}&#34;.format(error))
        msg = &#34;Failed to get record from MySQL table: {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in get_items: {}&#34;.format(e))
        msg = &#34;Failed to get record from MySQL table: {}&#34;.format(e)
        return False, msg

        # print(&#34;Database error: {}&#34;.format(e))

    # finally:
    #     if connection.is_connected():
    #         cursor.close()
    #         connection.close()
    #         print(&#34;MySQL connection is closed&#34;)</code></pre>
</details>
</dd>
<dt id="Backend.utils.insert_item"><code class="name flex">
<span>def <span class="ident">insert_item</span></span>(<span>item_name, quantity, description, zipcode, city, donor_id, category)</span>
</code></dt>
<dd>
<div class="desc"><p>Inserts an item into the database.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>item_name</code></strong> :&ensp;<code>string</code></dt>
<dd>Name of the item.</dd>
<dt><strong><code>quantity</code></strong> :&ensp;<code>int</code></dt>
<dd>Quantity of the item.</dd>
<dt><strong><code>description</code></strong> :&ensp;<code>string</code></dt>
<dd>Information about the item.</dd>
<dt><strong><code>zipcode</code></strong> :&ensp;<code>string</code></dt>
<dd>Location of the item in zipcode.</dd>
<dt><strong><code>city</code></strong> :&ensp;<code>string</code></dt>
<dd>Location of the item in terms of city.</dd>
<dt><strong><code>donor_id</code></strong> :&ensp;<code>int</code></dt>
<dd>ID of the user who listed the item.</dd>
<dt><strong><code>category</code></strong> :&ensp;<code>string</code></dt>
<dd>Which category the item belongs to. eg. Food, electronics.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a message about the same.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def insert_item(item_name, quantity, description, zipcode, city, donor_id, category):
    &#34;&#34;&#34;
    Inserts an item into the database.

    Parameters
    ----------
    item_name : string
        Name of the item.
    quantity : int
        Quantity of the item.
    description : string
        Information about the item.
    zipcode : string
        Location of the item in zipcode.
    city : string
        Location of the item in terms of city.
    donor_id : int
        ID of the user who listed the item.
    category : string
        Which category the item belongs to. eg. Food, electronics.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a message about the same.
    &#34;&#34;&#34;

    try:
        print(item_name)
        cursor = connection.cursor(dictionary=True)
        mysql_insert_query = &#34;&#34;&#34;INSERT INTO items (item_name, quantity, description, zipcode, city, donor_id, category) 
                                VALUES (%s, %s, %s, %s, %s, %s, %s) &#34;&#34;&#34;

        record = (item_name, quantity, description,
                  zipcode, city, donor_id, category)
        cursor.execute(mysql_insert_query, record)
        connection.commit()
        print(&#34;Record inserted successfully into item table&#34;)
        msg = &#34;Record inserted successfully into item table&#34;
        cursor.close()
        return True, msg

    except mysql.connector.Error as error:
        print(&#34;Failed to insert into items table {}&#34;.format(error))
        msg = &#34;Failed to insert into items table {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in insert_item: {}&#34;.format(e))
        msg = &#34;Failed to insert into items table {}&#34;.format(e)
        return False, msg
        # return False, &#34;some error occurred in get_items: {}&#34;.format(e)

    # finally:
    #     if connection.is_connected():
    #         cursor.close()
    #         connection.close()
    #         print(&#34;MySQL connection is closed&#34;)</code></pre>
</details>
</dd>
<dt id="Backend.utils.loginCheck"><code class="name flex">
<span>def <span class="ident">loginCheck</span></span>(<span>email, password)</span>
</code></dt>
<dd>
<div class="desc"><p>Checks if the password and email are matching in the database.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>email</code></strong> :&ensp;<code>string</code></dt>
<dd>Email of the user.</dd>
<dt><strong><code>password</code></strong> :&ensp;<code>string</code></dt>
<dd>Password of the user.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>Returns a tuple with two elements. The first element(a boolean variable) is a check to see if there is a user present with matching password and email. The second element is a status code of whether there is a database error or not.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def loginCheck(email, password):
    &#34;&#34;&#34;
    Checks if the password and email are matching in the database.

    Parameters
    ----------
    email : string
        Email of the user.
    password : string
        Password of the user.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) is a check to see if there is a user present with matching password and email. The second element is a status code of whether there is a database error or not.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        cursor.execute(
            &#39;SELECT * FROM users WHERE email = %s AND password = %s&#39;, (email, password))
        user = cursor.fetchone()
        cursor.close()
        if user:
            return (True, 1)
        else:
            return (False, 1)
    except mysql.connector.Error as error:
        print(error)
        return (False, 0)

    except Exception as e:
        print(&#34;some error occurred in loginCheck: {}&#34;.format(e))
        return (False, 0)
        # exit(&#34;some error occurred in get_items: {}&#34;.format(e))</code></pre>
</details>
</dd>
<dt id="Backend.utils.updateProfile"><code class="name flex">
<span>def <span class="ident">updateProfile</span></span>(<span>data)</span>
</code></dt>
<dd>
<div class="desc"><p>Updates an user in the database.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>data</code></strong> :&ensp;<code>json</code></dt>
<dd>Updated user information.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a message about the same.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def updateProfile(data):
    &#34;&#34;&#34;
    Updates an user in the database.

    Parameters
    ----------
    data : json
        Updated user information.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a message about the same.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        mysql_update_query = &#34;&#34;&#34;UPDATE users set name = %s, email=%s, city=%s, zipcode=%s, interests=%s WHERE ID = %s &#34;&#34;&#34;

        input_data = (data[&#39;name&#39;], data[&#39;email&#39;],
                      str(data[&#39;city&#39;]), str(data[&#39;zipCodes&#39;]), str(data[&#39;interests&#39;]), int(data[&#39;id&#39;]))
        cursor.execute(mysql_update_query, input_data)
        connection.commit()

        print(&#34;Record updated successfully into item table&#34;)
        msg = &#34;Record updated successfully into item table&#34;
        cursor.close()
        return True, msg

    except mysql.connector.Error as error:
        print(&#34;Failed to update table {}&#34;.format(error))
        msg = &#34;Failed to update table {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in updateProfile: {}&#34;.format(e))
        msg = &#34;Failed to update table {}&#34;.format(e)
        return False, msg
        # exit(&#34;some error occurred in get_items: {}&#34;.format(e))</code></pre>
</details>
</dd>
<dt id="Backend.utils.update_item"><code class="name flex">
<span>def <span class="ident">update_item</span></span>(<span>data)</span>
</code></dt>
<dd>
<div class="desc"><p>Updates an item in the database.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>data</code></strong> :&ensp;<code>json</code></dt>
<dd>Updated item information.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a message about the same.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_item(data):
    &#34;&#34;&#34;
    Updates an item in the database.

    Parameters
    ----------
    data : json
        Updated item information.

    Returns
    ----------
    tuple
        Returns a tuple with two elements. The first element(a boolean variable) checks to see if the database operations worked correctly. The second element is a message about the same.
    &#34;&#34;&#34;

    try:
        cursor = connection.cursor(dictionary=True)
        mysql_update_query = &#34;&#34;&#34;UPDATE items set item_name = %s, quantity = %s, description = %s, zipcode = %s, city = %s, donor_id = %s, category = %s WHERE item_id = %s &#34;&#34;&#34;

        input_data = (data[&#39;item_name&#39;], data[&#39;quantity&#39;], data[&#39;description&#39;],
                      data[&#39;zipcode&#39;], data[&#39;city&#39;], data[&#39;donor_id&#39;], data[&#39;category&#39;], data[&#39;item_id&#39;])
        cursor.execute(mysql_update_query, input_data)
        connection.commit()
        print(&#34;Record updated successfully into item table&#34;)
        msg = &#34;Record updated successfully into item table&#34;
        cursor.close()
        return True, msg

    except mysql.connector.Error as error:
        print(&#34;Failed to update into items table {}&#34;.format(error))
        msg = &#34;Failed to update into items table {}&#34;.format(error)
        return False, msg

    except Exception as e:
        print(&#34;some error occurred in update_item: {}&#34;.format(e))
        msg = &#34;Failed to update into items table {}&#34;.format(e)
        return False, msg
        # return False, &#34;some error occurred in get_items: {}&#34;.format(e)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="Backend" href="index.html">Backend</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="Backend.utils.addDonation" href="#Backend.utils.addDonation">addDonation</a></code></li>
<li><code><a title="Backend.utils.addUser" href="#Backend.utils.addUser">addUser</a></code></li>
<li><code><a title="Backend.utils.checkDuplicateEmail" href="#Backend.utils.checkDuplicateEmail">checkDuplicateEmail</a></code></li>
<li><code><a title="Backend.utils.getDonorHistory" href="#Backend.utils.getDonorHistory">getDonorHistory</a></code></li>
<li><code><a title="Backend.utils.getRecieverHistory" href="#Backend.utils.getRecieverHistory">getRecieverHistory</a></code></li>
<li><code><a title="Backend.utils.getUserProfileByEmail" href="#Backend.utils.getUserProfileByEmail">getUserProfileByEmail</a></code></li>
<li><code><a title="Backend.utils.getUserProfileByID" href="#Backend.utils.getUserProfileByID">getUserProfileByID</a></code></li>
<li><code><a title="Backend.utils.get_items" href="#Backend.utils.get_items">get_items</a></code></li>
<li><code><a title="Backend.utils.insert_item" href="#Backend.utils.insert_item">insert_item</a></code></li>
<li><code><a title="Backend.utils.loginCheck" href="#Backend.utils.loginCheck">loginCheck</a></code></li>
<li><code><a title="Backend.utils.updateProfile" href="#Backend.utils.updateProfile">updateProfile</a></code></li>
<li><code><a title="Backend.utils.update_item" href="#Backend.utils.update_item">update_item</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>